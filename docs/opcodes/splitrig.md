<!--
id:splitrig
category:Instrument Control:Sensing and Control
-->
# splitrig
Split a trigger signal (i.e. a timed sequence of control-rate impulses) into several channels following a structure designed by the user.

## Syntax
``` csound-orc
splitrig ktrig, kndx, imaxtics, ifn, kout1 [,kout2,...,koutN]
```

### Initialization

_imaxtics_ - number of tics belonging to largest pattern

_ifn_ - number of table containing channel-data structuring

### Performance

_asig_ - incoming (input) signal

_ktrig_ - trigger signal

The _splitrig_ opcode splits a trigger signal into several output channels according to one or more patterns provided by the user. Normally the regular timed trigger signal generated by metro opcode is used to be transformed into rhythmic pattern that can trig several independent melodies or percussion riffs. But you can also start from non-isocronous trigger signals. This allows to use some "interpretative" and less "mechanic" groove variations. Patterns are looped and each numtics_of_pattern_N the cycle is repeated.

The scheme of patterns is defined by the user and is stored into _ifn_ table according to the following format:

``` csound-orc
gi1  ftgen 1,0,1024,  -2 \  ; table is generated with GEN02 in this case
\                           ;
numtics_of_pattern_1, \ ;pattern 1
   tic1_out1, tic1_out2, ... , tic1_outN,\
   tic2_out1, tic2_out2, ... , tic2_outN,\
   tic3_out1, tic3_out2, ... , tic3_outN,\
   .....
   ticN_out1, ticN_out2, ... , ticN_outN,\
\
numtics_of_pattern_2, \ ;pattern 2
   tic1_out1, tic1_out2, ... , tic1_outN,\
   tic2_out1, tic2_out2, ... , tic2_outN,\
   tic3_out1, tic3_out2, ... , tic3_outN,\
   .....
   ticN_out1, ticN_out2, ... , ticN_outN,\
   .....
\
numtics_of_pattern_N,\ ;pattern N
   tic1_out1, tic1_out2, ... , tic1_outN,\
   tic2_out1, tic2_out2, ... , tic2_outN,\
   tic3_out1, tic3_out2, ... , tic3_outN,\
   .....
   ticN_out1, ticN_out2, ... , ticN_outN,\
```

This scheme can contain more than one pattern, each one with a different number of rows. Each pattern is preceded by a a special row containing a single _numtics_of_pattern_N_ field; this field expresses the number of tics that makes up the corresponding pattern. Each pattern's row makes up a tic.  Each pattern's column corresponds to a channel, and each field of a row is a number that makes up the value outputted by the corresponding _koutXX_ channel (if number is a zero, corresponding output channel will not trigger anything in that particular arguments). Obviously, all rows must contain the same number of fields that must be equal to the number of _koutXX_ channel. All patterns must contain the same number of rows, this number must be equal to the largest pattern and is defined by _imaxtics_ variable. Even if a pattern has less tics than the largest pattern, it must be made up of the same number of rows, in this case, some of these rows, at the end of the pattern itself, will not be used (and can be set to any value, because it does not matter).

The _kndx_ variable chooses the number of the pattern to be played, zero indicating the first pattern. Each time the integer part of _kndx_ changes, tic counter is reset to zero.

Patterns are looped and each _numtics_of_pattern_N_ the cycle is repeated.

examples 4 - calculate average value of asig in the time interval

This opcode can be useful in several situations, for example to implement a vu-meter

## Examples

Here is an example of splitrig opcode. It uses the file [splitrig.csd](../../examples/splitrig.csd).

``` csound-csd title="Example of the splitrig opcode." linenums="1"
--8<-- "examples/splitrig.csd"
```

## See also

[Sensing and Control: Tempo and Sequencing](../../control/sensing)

## Credits

Written by Gabriel Maldonado.

New in Csound 5 (Previously available only on CsoundAV)
