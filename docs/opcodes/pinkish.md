<!--
id:pinkish
category:Signal Generators:Random (Noise) Generators
-->
# pinkish
Generates approximate pink noise (-3dB/oct response) by one of two different methods:

*  a multirate noise generator after Moore, coded by Martin Gardner
*  a filter bank designed by Paul Kellet

## Syntax
``` csound-orc
ares pinkish xin [, imethod] [, inumbands] [, iseed] [, iskip]
```

### Initialization

_imethod_ (optional, default=0) -- selects filter method:

*  0 = Gardner method (default).
*  1 = Kellet filter bank.
*  2 = A somewhat faster filter bank by Kellet, with less accurate response.

_inumbands_ (optional) -- only effective with Gardner method. The number of noise bands to generate. Maximum is 32, minimum is 4. Higher levels give smoother spectrum, but above 20 bands there will be almost DC-like slow fluctuations.  Default value is 20.

_iseed_ (optional, default=0) -- only effective with Gardner method. If non-zero, seeds the random generator. If zero, the generator will be seeded from current time. Default is 0.

_iskip_ (optional, default=0) -- if non-zero, skip (re)initialization of internal state (useful for tied notes).  Default is 0.

### Performance

_xin_ -- for Gardner method: k- or a-rate amplitude. For Kellet filters: normally a-rate uniform random noise from rand (31-bit) or unirand, but can be any a-rate signal. The output peak value varies widely (&plusmn;15%) even over long runs, and will usually be well below the input amplitude. Peak values may also occasionally overshoot input amplitude or noise.

_pinkish_ attempts to generate pink noise (i.e., noise with equal energy in each octave), by one of two different methods.

The first method, by Moore &amp; Gardner, adds several (up to 32) signals of white noise, generated at octave rates (sr, sr/2, sr/4 etc). It obtains pseudo-random values from an internal 32-bit generator. This random generator is local to each opcode instance and seedable (similar to _rand_).

The second method is a lowpass filter with a response approximating -3dB/oct. If the input is uniform white noise, it outputs pink noise. Any signal may be used as input for this method.  The high quality filter is slower, but has less ripple and a slightly wider operating frequency range than less computationally intense versions. With the Kellet filters, seeding is not used.

The Gardner method output has some frequency response anomalies in the low-mid and high-mid frequency ranges. More low-frequency energy can be generated by increasing the number of bands. It is also a bit faster.  The refined Kellet filter has very smooth spectrum, but a more limited effective range. The level increases slightly at the high end of the spectrum.

## Examples

Here is an example of the pinkish opcode. It uses the file [pinkish.csd](../../examples/pinkish.csd).

``` csound-orc title="Example of the pinkish opcode." linenums="1"
--8<-- "examples/pinkish.csd"
```

Kellet-filtered noise for a tied note (_iskip_ is non-zero).

## See also

[Random (Noise) Generators](../../siggen/random)

## Credits

Authors: Phil Burk and John ffitch<br>
University of Bath/Codemist Ltd.<br>
Bath, UK<br>
May 2000<br>

New in Csound Version 4.07

Adapted for Csound by Rasmus Ekman

The noise bands method is due to F. R. Moore (or R. F. Voss), and was presented by Martin Gardner in an oft-cited article in Scientific American. The present version was coded by Phil Burk as the result of discussion on the music-dsp mailing list, with significant optimizations suggested by James McCartney.

The filter bank was designed by Paul Kellet, posted to the music-dsp mailing list.

The whole pink noise discussion was collected on a HTML page by Robin Whittle, which is currently available at [http://www.firstpr.com.au/dsp/pink-noise/](http://www.firstpr.com.au/dsp/pink-noise/).

Added notes by Rasmus Ekman on September 2002.
