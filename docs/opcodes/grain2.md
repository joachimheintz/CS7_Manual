<!--
id:grain2
category:Signal Generators:Granular Synthesis
-->
# grain2
Easy-to-use granular synthesis texture generator.

Generate granular synthesis textures. _grain2_ is simpler to use, but  [grain3](../../opcodes/grain3)  offers more control.

## Syntax
```csound-orc
ares grain2 kcps, kfmd, kgdur, iovrlp, kfn, iwfn [, irpow] \
            [, iseed] [, imode]
```

### Initialization
_iovrlp_ -- (fixed) number of overlapping grains.
  
_iwfn_ -- function table containing window waveform (Use [GEN20](../../scoregens/gen20) to calculate _iwfn_).
  
_irpow_ (optional, default=0) -- this value controls the distribution of grain frequency variation.  If _irpow_ is positive, the random distribution (_x_ is in the range -1 to 1) is
```
    abs(x) ^ ((1 / irpow) - 1)
```
For negative _irpow_ values, it is
```
(1 - abs(x)) ^ ((-1 / irpow) - 1)
```
Setting _irpow_ to -1, 0, or 1 will result in uniform distribution (this is also faster to calculate). The image below shows some examples for _irpow_. The default value of _irpow_ is 0.

<figure markdown="span">
  ![A graph of distributions for different values of irpow](../../images/grain2_rand-448x289.png)
  <figcaption>A graph of distributions for different values of irpow</figcaption>
</figure>
  
_iseed_ (optional, default=0) -- seed value for random number generator (positive integer in the range 1 to 2147483646 (2<sup>31</sup> - 2)). Zero or negative value seeds from current time (this is also the default).
  
_imode_ (optional default=0) -- sum of the following values:

  * _8:_ interpolate window waveform (slower).  
  * _4:_ do not interpolate grain waveform (fast, but lower quality).  
  * _2:_ grain frequency is continuously modified by _kcps_ and _kfmd_ (by default, each grain keeps the frequency it was launched with). This may be slower at high control rates.  
  * _1:_ skip initialization.  

### Performance
_ares_ -- output signal.
  
_kcps_ -- grain frequency in Hz.
  
_kfmd_ -- random variation (bipolar) in grain frequency in Hz.
  
_kgdur_ -- grain duration in seconds. _kgdur_ also controls the duration of already active grains (actually the speed at which the window function is read). This behavior does not depend on the _imode_ flags.
  
_kfn_ -- function table containing grain waveform. Table number can be changed at k-rate (this is useful to select from a set of band-limited tables generated by [GEN30](../../scoregens/gen30), to avoid aliasing).
  
  
> :memo: **Note**  
>
>  _grain2_ internally uses the same random number generator as _rnd31_. So reading  [its documentation](../../opcodes/rnd31) is also recommended.

## Examples
Here is an example of the grain2 opcode. It uses the file [grain2.csd](../../examples/grain2.csd).
``` csound-orc title="Example of the grain2 opcode." linenums="1"
--8<-- "examples/grain2.csd"
```

## See Also
[Granular Synthesis](../../siggen/granular)

## Credits
Author: Istvan Varga

New in version 4.15  
Updated April 2002 by Istvan Varga
